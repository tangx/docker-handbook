


; declare backend


upstream host1_example_com { 

    ; getvs only get value
    ; 
    server 192.168.10.12:80;
    
    server 192.168.10.13:8080;
    


    

    ; line

    ; gets get both key and value 
    
    ; key = /services/zookeeper/%s/xxxx
    ; server Key=/services/zookeeper/host1.example.com/0;
    ; server Key=0;
    ; server Value=192.168.10.12:80;
    server 192.168.10.12:80 ;
    
    ; key = /services/zookeeper/%s/xxxx
    ; server Key=/services/zookeeper/host1.example.com/1;
    ; server Key=1;
    ; server Value=192.168.10.13:8080;
    server 192.168.10.13:8080 ;
    
}

server {
    server_name host1.example.com;
    location / {
        proxy_pass host1_example_com;
    }
}

#########################


; declare backend


upstream host2_example_com { 

    ; getvs only get value
    ; 
    server 192.168.10.13:8080;
    
    server host2;
    


    

    ; line

    ; gets get both key and value 
    
    ; key = /services/zookeeper/%s/xxxx
    ; server Key=/services/zookeeper/host2.example.com/IP;
    ; server Key=IP;
    ; server Value=192.168.10.13:8080;
    server 192.168.10.13:8080 ;
    
    ; key = /services/zookeeper/%s/xxxx
    ; server Key=/services/zookeeper/host2.example.com/Id;
    ; server Key=Id;
    ; server Value=host2;
    server host2 ;
    
}

server {
    server_name host2.example.com;
    location / {
        proxy_pass host2_example_com;
    }
}

#########################



